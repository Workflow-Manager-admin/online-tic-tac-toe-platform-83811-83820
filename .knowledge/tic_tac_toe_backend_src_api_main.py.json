{"is_source_file": true, "format": "Python", "description": "This file is a FastAPI backend server implementation for a Tic Tac Toe game platform. It manages user registration, login, game creation, moves, game state retrieval, leaderboards, and websocket-based real-time updates. It interacts with in-memory mock databases and utilizes several imported modules for authentication, data modeling, game logic, and websocket communication.", "external_files": ["./models", "./core"], "external_methods": ["hash_password", "verify_password", "create_access_token", "get_current_user", "ai_move", "get_leaderboard_stub"], "published": ["health_check", "register_user", "login_user", "start_game", "make_move", "get_game_state", "get_history", "get_leaderboard", "websocket_game_updates", "websocket_info"], "classes": [{"name": "TicTacToeGame", "description": "A class representing the Tic Tac Toe game logic, including methods for making moves, checking winner, and serializing the board."}], "methods": [{"name": "str hash_password(password: str)", "description": "Hashes a password string using SHA-256.", "scope": "", "scopeKind": ""}, {"name": "bool verify_password(password: str, pw_hash: str)", "description": "Verifies a plaintext password against a hashed password.", "scope": "", "scopeKind": ""}, {"name": "create_access_token(data: dict, expires_delta: Optional[timedelta] = None)", "description": "Creates a JWT access token with optional expiration.", "scope": "", "scopeKind": ""}, {"name": "dict get_current_user(token: str = Depends(oauth2_scheme))", "description": "Decodes JWT token to retrieve current user info from the mock database.", "scope": "", "scopeKind": ""}, {"name": "ai_move", "description": "Determines the AI's move given the current board state."}, {"name": "get_leaderboard_stub", "description": "Provides a stubbed leaderboard data for demo purposes."}, {"name": "get_game_state(game_id: int, user: dict = Depends(get_current_user))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_history(user: dict = Depends(get_current_user))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_leaderboard()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "health_check()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "login_user(request: UserLoginRequest)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "make_move(request: MoveRequest, user: dict = Depends(get_current_user))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "register_user(request: UserRegisterRequest)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "start_game(request: GameStartRequest, user: dict = Depends(get_current_user))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "websocket_game_updates(websocket: WebSocket, game_id: int)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "websocket_info()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["hash_password", "verify_password", "create_access_token", "get_current_user", "format", "jwt.decode", "jwt.encode", "TicTacToeGame.make_move", "TicTacToeGame.check_winner", "TicTacToeGame.is_draw", "TicTacToeGame.serialize_board", "ai_move", "get_leaderboard_stub"], "search-terms": ["FastAPI", "/new_game", "/make_move", "websocket", "leaderboard", "player registration", "game state", "in-memory sessions", "JWT authentication", "TicTacToeGame"], "state": 2, "file_id": 2, "knowledge_revision": 14, "git_revision": "758fdfd86fa15c8d7a13b7710d681d6571d3c3b6", "revision_history": [{"9": "758fdfd86fa15c8d7a13b7710d681d6571d3c3b6"}, {"14": "758fdfd86fa15c8d7a13b7710d681d6571d3c3b6"}], "ctags": [{"_type": "tag", "name": "ACCESS_TOKEN_EXPIRE_MINUTES", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-platform-83811-83820/tic_tac_toe_backend/src/api/main.py", "pattern": "/^ACCESS_TOKEN_EXPIRE_MINUTES = 120$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "ALGORITHM", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-platform-83811-83820/tic_tac_toe_backend/src/api/main.py", "pattern": "/^ALGORITHM = \"HS256\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "SECRET_KEY", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-platform-83811-83820/tic_tac_toe_backend/src/api/main.py", "pattern": "/^SECRET_KEY = \"tictactoe-secret\"  # For demo purposes only! Move to env variable in production.$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-platform-83811-83820/tic_tac_toe_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "create_access_token", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-platform-83811-83820/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def create_access_token(data: dict, expires_delta: Optional[timedelta] = None):$/", "language": "Python", "kind": "function", "signature": "(data: dict, expires_delta: Optional[timedelta] = None)"}, {"_type": "tag", "name": "game_id_counter", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-platform-83811-83820/tic_tac_toe_backend/src/api/main.py", "pattern": "/^game_id_counter = 1$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "get_current_user", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-platform-83811-83820/tic_tac_toe_backend/src/api/main.py", "pattern": "/^async def get_current_user(token: str = Depends(oauth2_scheme)) -> dict:$/", "language": "Python", "typeref": "typename:dict", "kind": "function", "signature": "(token: str = Depends(oauth2_scheme))"}, {"_type": "tag", "name": "get_game_state", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-platform-83811-83820/tic_tac_toe_backend/src/api/main.py", "pattern": "/^async def get_game_state(game_id: int, user: dict = Depends(get_current_user)):$/", "language": "Python", "kind": "function", "signature": "(game_id: int, user: dict = Depends(get_current_user))"}, {"_type": "tag", "name": "get_history", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-platform-83811-83820/tic_tac_toe_backend/src/api/main.py", "pattern": "/^async def get_history(user: dict = Depends(get_current_user)):$/", "language": "Python", "kind": "function", "signature": "(user: dict = Depends(get_current_user))"}, {"_type": "tag", "name": "get_leaderboard", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-platform-83811-83820/tic_tac_toe_backend/src/api/main.py", "pattern": "/^async def get_leaderboard():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "hash_password", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-platform-83811-83820/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def hash_password(password: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(password: str)"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-platform-83811-83820/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "login_user", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-platform-83811-83820/tic_tac_toe_backend/src/api/main.py", "pattern": "/^async def login_user(request: UserLoginRequest):$/", "language": "Python", "kind": "function", "signature": "(request: UserLoginRequest)"}, {"_type": "tag", "name": "make_move", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-platform-83811-83820/tic_tac_toe_backend/src/api/main.py", "pattern": "/^async def make_move(request: MoveRequest, user: dict = Depends(get_current_user)):$/", "language": "Python", "kind": "function", "signature": "(request: MoveRequest, user: dict = Depends(get_current_user))"}, {"_type": "tag", "name": "oauth2_scheme", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-platform-83811-83820/tic_tac_toe_backend/src/api/main.py", "pattern": "/^oauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"token\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "register_user", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-platform-83811-83820/tic_tac_toe_backend/src/api/main.py", "pattern": "/^async def register_user(request: UserRegisterRequest):$/", "language": "Python", "kind": "function", "signature": "(request: UserRegisterRequest)"}, {"_type": "tag", "name": "sessions_db", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-platform-83811-83820/tic_tac_toe_backend/src/api/main.py", "pattern": "/^sessions_db: Dict[int, dict] = {}  # game_id: {game, players, start, moves}$/", "language": "Python", "typeref": "typename:Dict[int, dict]", "kind": "variable"}, {"_type": "tag", "name": "start_game", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-platform-83811-83820/tic_tac_toe_backend/src/api/main.py", "pattern": "/^async def start_game(request: GameStartRequest, user: dict = Depends(get_current_user)):$/", "language": "Python", "kind": "function", "signature": "(request: GameStartRequest, user: dict = Depends(get_current_user))"}, {"_type": "tag", "name": "user_games", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-platform-83811-83820/tic_tac_toe_backend/src/api/main.py", "pattern": "/^user_games: Dict[int, List[int]] = {}  # user_id: List[game_id]$/", "language": "Python", "typeref": "typename:Dict[int, List[int]]", "kind": "variable"}, {"_type": "tag", "name": "user_id_counter", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-platform-83811-83820/tic_tac_toe_backend/src/api/main.py", "pattern": "/^user_id_counter = 1$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "users_db", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-platform-83811-83820/tic_tac_toe_backend/src/api/main.py", "pattern": "/^users_db: Dict[str, dict] = {}  # email: {password_hash, username, id}$/", "language": "Python", "typeref": "typename:Dict[str, dict]", "kind": "variable"}, {"_type": "tag", "name": "verify_password", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-platform-83811-83820/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def verify_password(password: str, pw_hash: str) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(password: str, pw_hash: str)"}, {"_type": "tag", "name": "websocket_game_updates", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-platform-83811-83820/tic_tac_toe_backend/src/api/main.py", "pattern": "/^async def websocket_game_updates(websocket: WebSocket, game_id: int):$/", "language": "Python", "kind": "function", "signature": "(websocket: WebSocket, game_id: int)"}, {"_type": "tag", "name": "websocket_info", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-platform-83811-83820/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def websocket_info():$/", "language": "Python", "kind": "function", "signature": "()"}], "hash": "3c24e78e8dc15dc1f72d7dc73ccb9ef7", "format-version": 4, "code-base-name": "tic_tac_toe_backend", "filename": "tic_tac_toe_backend/src/api/main.py", "fields": [{"name": "ACCESS_TOKEN_EXPIRE_MINUTES = 120", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ALGORITHM = \"HS256\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SECRET_KEY = \"tictactoe-secret\"  # For demo purposes only! Move to env variable in production.", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "game_id_counter = 1", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "oauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"token\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[int, dict] sessions_db", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[int, List[int]] user_games", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "user_id_counter = 1", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str, dict] users_db", "scope": "", "scopeKind": "", "description": "unavailable"}]}